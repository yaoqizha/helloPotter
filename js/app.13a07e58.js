(function(){"use strict";var t={3272:function(t,a,e){var n=e(9242),o=e(3396);function i(t,a,e,n,i,l){const r=(0,o.up)("HelloPotter");return(0,o.wg)(),(0,o.j4)(r)}e(560);var l=e(7139),r=e(4870),c=e(1076),u=JSON.parse('[{"id":1,"name":"Harry Potter","description":"Harry Potter，被選者之一，以他的蛇語能力、守護神（鹿）和逐影术而著稱。作為成為鳳凰會的領袖，他充滿勇氣和毅力，是黑魔王的堅定敵人。","team":"成為鳳凰會","health":85,"min_attack":5,"max_attack":20},{"id":2,"name":"Hermione Granger","description":"Hermione Granger是成為鳳凰會中的智者，以她卓越的智慧和魔法技能而聞名。她在戰鬥中的精湛表現和對法術的深刻理解使她成為一位強大的對手，同時她擁有時間器，讓她在戰鬥中更具優勢。","team":"成為鳳凰會","health":90,"min_attack":5,"max_attack":20},{"id":3,"name":"Ron Weasley","description":"Ron Weasley是成為鳳凰會中的忠實朋友和戰士。儘管他有時候有些害怕，但在關鍵時刻總是能夠挺身而出，用他的智慧和勇氣支持著哈利和 Hermione。","team":"成為鳳凰會","health":80,"min_attack":6,"max_attack":18},{"id":4,"name":"Dumbledore","description":"Albus Dumbledore是霍格華茲的校長，以他的深邃智慧和對魔法的卓越掌握而聞名。作為一位賢明的領袖，他致力於對抗黑魔王並保護魔法世界的和平。","team":"成為鳳凰會","health":95,"min_attack":8,"max_attack":22},{"id":5,"name":"Hagrid","description":"Rubeus Hagrid是霍格華茲的魔獸學教授，以他對巨人和奇幻生物的熱愛而聞名。儘管他外表嚇人，但內心是一個善良且堅定的朋友，經常在困難時刻幫助成為鳳凰會。","team":"成為鳳凰會","health":88,"min_attack":7,"max_attack":20},{"id":6,"name":"Sirius Black","description":"Sirius Black是一位被誤解的巫師，曾是哈利的教父。他擁有豐富的魔法知識和對家族的愛，為了保護哈利而犧牲自己。","team":"成為鳳凰會","health":85,"min_attack":9,"max_attack":24},{"id":7,"name":"Luna Lovegood","description":"Luna Lovegood是一位古靈精怪的女巫，以她對奇幻生物和魔法事物的著迷而聞名。她的獨特視角和樂觀性格使她成為成為鳳凰會中的一員。","team":"成為鳳凰會","health":82,"min_attack":6,"max_attack":18},{"id":8,"name":"Ginny Weasley","description":"Ginny Weasley是個性堅強的女巫，擁有卓越的飛行和魔法技能。她在魔法世界中展現出色的戰鬥才華，是哈利的摯愛。","team":"成為鳳凰會","health":86,"min_attack":8,"max_attack":22},{"id":9,"name":"Neville Longbottom","description":"Neville Longbottom是一位勇敢的巫師，以他的毅力和堅持不懈的精神而聞名。儘管起初看似害羞，但在戰鬥中展現出強大的魔法能力。","team":"成為鳳凰會","health":84,"min_attack":7,"max_attack":20},{"id":10,"name":"Remus Lupin","description":"Remus Lupin是一位狼人，同時也是一位優秀的魔法師。儘管他面臨著月圓時的變身困擾，但在人性和智慧上都展現出色。","team":"成為鳳凰會","health":88,"min_attack":8,"max_attack":22},{"id":11,"name":"Lord Voldemort","description":"Lord Voldemort，黑魔王，是哈利波特世界中最邪惡的巫師之一。他以其對黑魔法的精通和對統治的渴望而聞名。食死徒們是他的忠實追隨者，為實現黑魔王的目標而效命。","team":"成為食死徒","health":95,"min_attack":10,"max_attack":25},{"id":12,"name":"Bellatrix Lestrange","description":"Bellatrix Lestrange是食死徒中最狂熱和危險的一員，以她對黑魔王的狂熱忠誠和殘忍的性格而聞名。她在戰鬥中展現出無情和精湛的黑魔法技能。","team":"成為食死徒","health":92,"min_attack":9,"max_attack":23},{"id":13,"name":"Lucius Malfoy","description":"Lucius Malfoy是一位富有且有權勢的巫師，是食死徒中的高階成員。以他對黑魔王的忠誠和對純血巫師的偏愛而聞名。","team":"成為食死徒","health":90,"min_attack":8,"max_attack":22},{"id":14,"name":"Severus Snape","description":"Severus Snape是一位神秘而複雜的巫師，曾是食死徒，但後來背叛黑魔王。以他的魔法技巧和矛盾的性格而聞名。","team":"成為食死徒","health":88,"min_attack":8,"max_attack":22},{"id":15,"name":"Draco Malfoy","description":"Draco Malfoy是一位風雅的巫師，來自純血巫師家族。雖然曾受黑魔王的影響，但後來放棄黑暗的道路。","team":"成為食死徒","health":85,"min_attack":7,"max_attack":20},{"id":16,"name":"Narcissa Malfoy","description":"Narcissa Malfoy是Lucius Malfoy的妻子，同樣出身純血巫師家族。儘管她支持黑魔王，但她的首要關注是保護家族。","team":"成為食死徒","health":86,"min_attack":7,"max_attack":20},{"id":17,"name":"Alecto Carrow","description":"Alecto Carrow是食死徒中的一員，以她對黑魔法的崇拜和對魔法禁忌的熱愛而聞名。她在戰鬥中使用殘酷的咒語。","team":"成為食死徒","health":84,"min_attack":7,"max_attack":20},{"id":18,"name":"Antonin Dolohov","description":"Antonin Dolohov是一位強大而殘忍的食死徒，以他的黑魔法技能和對魔法戰鬥的激情而聞名。","team":"成為食死徒","health":89,"min_attack":8,"max_attack":22},{"id":19,"name":"Yaxley","description":"Yaxley是食死徒中的一員，以他在魔法政治和陰謀中的精明才智而聞名。他在黑魔王的部下中擔任高級職位。","team":"成為食死徒","health":87,"min_attack":7,"max_attack":20},{"id":20,"name":"Walden Macnair","description":"Walden Macnair是食死徒中的死亡魔法師，以他對危險生物的狂熱和殘忍的本性而聞名。他負責執行黑魔王的極端任務。","team":"成為食死徒","health":88,"min_attack":8,"max_attack":22}]');const s={class:"wrapper"},m=["src"],d={class:"text-area"},p={key:0},h=["for"],v=["id","value"];var f={__name:"HelloPotter",setup(t){const a=u,e=(0,r.iH)(!1),i=(0,r.iH)(!1),f=(0,r.iH)(""),k=(0,r.iH)([]);let _=(0,r.iH)([]),y=(0,r.iH)([]),g=(0,r.iH)(""),x=(0,r.iH)(0),w=2;const b=(0,r.iH)({name:"",skill:"",attack:0,health:0,team:""});f.value="https://images.unsplash.com/photo-1518709268805-4e9042af9f23?crop=entropy&cs=srgb&fm=jpg&ixid=M3w1MzYzMDB8MHwxfHNlYXJjaHwxfHxtYWdpYyUyMHdvcmxkfGVufDB8fHx8MTcwMTgxNzg5OHww&ixlib=rb-4.0.3&q=85";const H=["","","在禁忌森林裡面遭遇半人馬群包圍","","遭遇了一場激戰後，前往海格的小屋休息，這時候海格拿出一杯液體","","一年一度魔法世界的魁地奇比賽到了，賽場上的你看了一眼觀眾群後施展魔法","","今早醒來發現自己魔杖被壓斷了，前往Ollivanders魔杖店，挑選適合的魔杖","","在斜角巷撿到一顆水晶球，水晶球裡看到一個人影","","遇到一位強大的對手，還沒反應過來就被施打索命咒","","在前往霍格華茲的列車上撿到隱形斗篷，披上它後聽到了關於魔法部的重大消息","","貓頭鷹送來魔法部寄出違反巫師法的信，被帶往魔法部巫師法庭","","在弗倫德和喬治的愚人產品商店開幕，好奇前往購買商品","","穿巷口鑰，瞬間被傳送到一個陌生的地方","","遠方看到一群模糊的人影，發現是催狂魔群","","突然一輛騎士公車停在你眼前，乘務員說可以將陷入困境的你帶去任何地方","","在霍格華茲的教授家裡，發現了一顆魔法樹","","走在霍格華茲走廊，有求必應室突然出現在你面前","","憑著直覺來到狄恩森林，在冰冷湖面下發現葛來芬多寶劍","","在有求必應室看到雷文克勞皇冠，突然衝出一位鬼魂驚叫走開","","在月圓之夜喝下幸運藥水，出門卻遇到狼人在對滿月嚎叫","","想體驗麻瓜生活找到停在院子裡的飛天魔法汽車並開去麻瓜世界上空"],S=()=>`我在玩哈利波特冒險遊戲，我的角色數據是{name:"${b.value.name}",description:"${b.value.description}", attack:"${b.value.attack}", health:"${b.value.health}"}，發生了一個事件「${H[$(2,36)]}」，請提出三個對於事件產生的反應，以及對角色數據的影響，只回傳JSON格式，格式為 [{"event"://10到30字的事件反應,"result"://選擇這個事件發生了什麼事情以及為什麼會對攻擊力和生命值造成影響, "attack"://對攻擊力的影響正3到負3之間,"health"://對生命值的影響正20到負20之間 },...]，除了JSON不要回答其他內容，事件敘述請用中文回答`;async function M(){const t="https://api.openai.com/v1/chat/completions",a="gpt-3.5-turbo",e=window.location.search.replace("?token=","");_.value=[];const n=await c.Z.post(t,{messages:[{role:"user",content:S()}],model:a,max_tokens:720,temperature:.7,top_p:1,n:1},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});g.value=H[w];const o=JSON.parse(n?.data?.choices[0]?.message.content);k.value=o,_.value=o.map((({event:t},a)=>({content:t,index:a})))}async function O(){const t="https://api.openai.com/v1/chat/completions",a="gpt-3.5-turbo",e="",n=await c.Z.post(t,{messages:[{role:"user",content:`這是一個哈利波特的世界，請創造屬於${b.value.name}的故事結局，不要超過5行字`}],model:a,max_tokens:720,temperature:.7,top_p:1,n:1},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});g.value=n?.data?.choices[0]?.message.content}const L=(0,o.Fl)((()=>[...new Set(a.map((t=>t.team)))]));y.value=_.value.filter((t=>!0===t.isSelected));const D=(0,o.Fl)((()=>a.filter((t=>"成為鳳凰會"===t.team)))),j=(0,o.Fl)((()=>a.filter((t=>"成為食死徒"===t.team)))),C=()=>{x.value=x.value+1};function N(){e.value=!0,x.value=0,g.value="請選擇成為食死徒或是鳳凰會",z(L.value)}function P(){location.reload()}function z(t){let a=[];t.forEach(((t,e)=>{a.push({id:e,content:t})})),_.value=a}function U(t,a){const e=t.slice().sort((()=>Math.random()-.5));return e.slice(0,a)}const $=(t,a)=>{let e=Math.floor(Math.random()*(a-t+1))+t;return e%2!==0&&(e+=1),w=e,e},T=async({keyword:t})=>{const a="https://api.unsplash.com/search/photos",e=await c.Z.get(`${a}?query=${t}&client_id=lpzI5L4f2klqot43me98raxpI6FVeWHCbkSQuo9LM9Q`);f.value=e.data.results[Y(0,9)].urls.regular},Y=(t,a)=>Math.floor(Math.random()*(a-t+1))+t;return window.getRandomNumber=Y,(0,o.YP)((()=>y),(({value:t})=>{if(t){if(0===x.value){if("成為食死徒"===t){let t=j.value.map((t=>t.name));t=U(t,3),z(t)}else{let t=D.value.map((t=>t.name));t=U(t,3),z(t)}x.value++}if(1===x.value){g.value="請選擇你的角色";const a=u.find((({name:a})=>a===t));a&&(g.value=a?.description??"",b.value={name:a?.name,description:a?.description,health:a?.health,attack:a?.min_attack,team:a?.team})}}}),{deep:!0}),(0,o.YP)((()=>x),(({value:t})=>{if(t>1)if(t%2){T({keyword:"hogwarts express"});const t=k.value.find((({event:t})=>t===y.value));g.value=t.result,b.value.health+=+t.health,b.value.attack+=+t.attack,_.value=[]}else{if(b.value.health<=0)return g.value="你已經死亡",_.value=[],x.value=0,void(i.value=!0);if(b.value.attack<=2)return g.value="魔法能力過於低弱，回家吧",_.value=[],x.value=0,void(i.value=!0);T({keyword:"harry potter studio london"}),g.value="chatGPT正在思考中",M()}10===t&&(O(),i.value=!0,_.value=[])}),{deep:!0}),(t,a)=>((0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("img",{class:"main-img",src:f.value,alt:"unsplash img"},null,8,m),(0,o._)("div",{class:(0,l.C_)(["bottom-text",{start:e.value}])},[(0,o._)("div",d,[(0,r.SU)(x)>1?((0,o.wg)(),(0,o.iD)("p",p,"role:"+(0,l.zw)(b.value.name)+" health:"+(0,l.zw)(b.value.health)+" attack:"+(0,l.zw)(b.value.attack),1)):(0,o.kq)("",!0),(0,o._)("p",null,(0,l.zw)((0,r.SU)(g)),1),(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,r.SU)(_),(t=>((0,o.wg)(),(0,o.iD)("li",{key:t.id},[(0,o._)("label",{for:t.content},[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>(0,r.dq)(y)?y.value=t:y=t),id:t.index,value:t.content,type:"radio"},null,8,v),[[n.G2,(0,r.SU)(y)]]),(0,o.Uk)((0,l.zw)(t.content),1)],8,h)])))),128))])]),(0,o._)("button",{class:"start-btn",onClick:a[1]||(a[1]=t=>N())},"Click to Start"),(0,r.SU)(x)&&(0,r.SU)(x)<10&&!(0,r.SU)(g).includes("正在思考中")?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"round-btn",onClick:C}," Next Round ")):(0,o.kq)("",!0),i.value?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"restart-btn",onClick:a[2]||(a[2]=t=>P())}," 我要重來 ")):(0,o.kq)("",!0)],2)]))}};const k=f;var _=k,y={name:"App",components:{HelloPotter:_}},g=e(89);const x=(0,g.Z)(y,[["render",i]]);var w=x;(0,n.ri)(w).mount("#app")}},a={};function e(n){var o=a[n];if(void 0!==o)return o.exports;var i=a[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(a,n,o,i){if(!n){var l=1/0;for(s=0;s<t.length;s++){n=t[s][0],o=t[s][1],i=t[s][2];for(var r=!0,c=0;c<n.length;c++)(!1&i||l>=i)&&Object.keys(e.O).every((function(t){return e.O[t](n[c])}))?n.splice(c--,1):(r=!1,i<l&&(l=i));if(r){t.splice(s--,1);var u=o();void 0!==u&&(a=u)}}return a}i=i||0;for(var s=t.length;s>0&&t[s-1][2]>i;s--)t[s]=t[s-1];t[s]=[n,o,i]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,n){var o,i,l=n[0],r=n[1],c=n[2],u=0;if(l.some((function(a){return 0!==t[a]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(c)var s=c(e)}for(a&&a(n);u<l.length;u++)i=l[u],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(s)},n=self["webpackChunkhello_potter"]=self["webpackChunkhello_potter"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(3272)}));n=e.O(n)})();
//# sourceMappingURL=app.13a07e58.js.map